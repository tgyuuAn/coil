<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An image loading library for Android backed by Kotlin Coroutines"><meta name=author content="2024 Coil Contributors"><link href=https://coil-kt.github.io/coil/recipes/ rel=canonical><link href=../testing/ rel=prev><link href=../faq/ rel=next><link rel=icon href=../images/coil_logo_black.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.42"><title>Recipes - Coil</title><link rel=stylesheet href=../assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/site.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#recipes class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Coil class="md-header__button md-logo" aria-label=Coil data-md-component=logo> <img src=../images/coil_logo_black.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Coil </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Recipes </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=white aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=black aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/coil-kt/coil title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> Coil </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Coil class="md-nav__button md-logo" aria-label=Coil data-md-component=logo> <img src=../images/coil_logo_black.svg alt=logo> </a> Coil </label> <div class=md-nav__source> <a href=https://github.com/coil-kt/coil title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> Coil </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../compose/ class=md-nav__link> <span class=md-ellipsis> Compose </span> </a> </li> <li class=md-nav__item> <a href=../network/ class=md-nav__link> <span class=md-ellipsis> Network Images </span> </a> </li> <li class=md-nav__item> <a href=../image_loaders/ class=md-nav__link> <span class=md-ellipsis> Image Loaders </span> </a> </li> <li class=md-nav__item> <a href=../image_requests/ class=md-nav__link> <span class=md-ellipsis> Image Requests </span> </a> </li> <li class=md-nav__item> <a href=../image_pipeline/ class=md-nav__link> <span class=md-ellipsis> Extending the Image Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../gifs/ class=md-nav__link> <span class=md-ellipsis> GIFs </span> </a> </li> <li class=md-nav__item> <a href=../svgs/ class=md-nav__link> <span class=md-ellipsis> SVGs </span> </a> </li> <li class=md-nav__item> <a href=../videos/ class=md-nav__link> <span class=md-ellipsis> Video Frames </span> </a> </li> <li class=md-nav__item> <a href=../testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Recipes </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Recipes </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#palette class=md-nav__link> <span class=md-ellipsis> Palette </span> </a> </li> <li class=md-nav__item> <a href=#using-a-custom-okhttpclient class=md-nav__link> <span class=md-ellipsis> Using a custom OkHttpClient </span> </a> <nav class=md-nav aria-label="Using a custom OkHttpClient"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#headers class=md-nav__link> <span class=md-ellipsis> Headers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-a-memory-cache-key-as-a-placeholder class=md-nav__link> <span class=md-ellipsis> Using a Memory Cache Key as a Placeholder </span> </a> </li> <li class=md-nav__item> <a href=#shared-element-transitions class=md-nav__link> <span class=md-ellipsis> Shared Element Transitions </span> </a> </li> <li class=md-nav__item> <a href=#remote-views class=md-nav__link> <span class=md-ellipsis> Remote Views </span> </a> </li> <li class=md-nav__item> <a href=#transforming-painters class=md-nav__link> <span class=md-ellipsis> Transforming Painters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../java_compatibility/ class=md-nav__link> <span class=md-ellipsis> Java Compatibility </span> </a> </li> <li class=md-nav__item> <a href=../migrating/ class=md-nav__link> <span class=md-ellipsis> Migrating from Glide/Picasso </span> </a> </li> <li class=md-nav__item> <a href=../upgrading_to_coil2/ class=md-nav__link> <span class=md-ellipsis> Upgrading to Coil 2.x </span> </a> </li> <li class=md-nav__item> <a href=../upgrading_to_coil3/ class=md-nav__link> <span class=md-ellipsis> Upgrading to Coil 3.x </span> </a> </li> <li class=md-nav__item> <a href=../works_with_coil/ class=md-nav__link> <span class=md-ellipsis> Works with Coil </span> </a> </li> <li class=md-nav__item> <a href=../api/ class=md-nav__link> <span class=md-ellipsis> API ⏏ </span> </a> </li> <li class=md-nav__item> <a href=../sample/ class=md-nav__link> <span class=md-ellipsis> WASM Sample ⏏ </span> </a> </li> <li class=md-nav__item> <a href=../changelog/ class=md-nav__link> <span class=md-ellipsis> Change Log </span> </a> </li> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../code_of_conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#palette class=md-nav__link> <span class=md-ellipsis> Palette </span> </a> </li> <li class=md-nav__item> <a href=#using-a-custom-okhttpclient class=md-nav__link> <span class=md-ellipsis> Using a custom OkHttpClient </span> </a> <nav class=md-nav aria-label="Using a custom OkHttpClient"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#headers class=md-nav__link> <span class=md-ellipsis> Headers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-a-memory-cache-key-as-a-placeholder class=md-nav__link> <span class=md-ellipsis> Using a Memory Cache Key as a Placeholder </span> </a> </li> <li class=md-nav__item> <a href=#shared-element-transitions class=md-nav__link> <span class=md-ellipsis> Shared Element Transitions </span> </a> </li> <li class=md-nav__item> <a href=#remote-views class=md-nav__link> <span class=md-ellipsis> Remote Views </span> </a> </li> <li class=md-nav__item> <a href=#transforming-painters class=md-nav__link> <span class=md-ellipsis> Transforming Painters </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=recipes>Recipes<a class=headerlink href=#recipes title="Permanent link">&para;</a></h1> <p>This page provides guidance on how to handle some common use cases with Coil. You might have to modify this code to fit your exact requirements, but it should hopefully give you a push in the right direction!</p> <p>See a common use case that isn't covered? Feel free to submit a PR with a new section.</p> <h2 id=palette>Palette<a class=headerlink href=#palette title="Permanent link">&para;</a></h2> <p><a href="https://developer.android.com/training/material/palette-colors?hl=en">Palette</a> allows you to extract prominent colors from an image. To create a <code>Palette</code>, you'll need access to an image's <code>Bitmap</code>. This can be done in a number of ways:</p> <p>You can get access to an image's bitmap by setting a <code>ImageRequest.Listener</code> and enqueuing an <code>ImageRequest</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>imageView</span><span class=p>.</span><span class=na>load</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=c1>// Disable hardware bitmaps as Palette needs to read the image&#39;s pixels.</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=n>allowHardware</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=n>listener</span><span class=p>(</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>        </span><span class=n>onSuccess</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>_</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>-&gt;</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>            </span><span class=c1>// Create the palette on a background thread.</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>            </span><span class=n>Palette</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=na>drawable</span><span class=p>.</span><span class=na>toBitmap</span><span class=p>()).</span><span class=na>generate</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>palette</span><span class=w> </span><span class=o>-&gt;</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>                </span><span class=c1>// Consume the palette.</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>    </span><span class=p>)</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=p>}</span>
</code></pre></div> <h2 id=using-a-custom-okhttpclient>Using a custom OkHttpClient<a class=headerlink href=#using-a-custom-okhttpclient title="Permanent link">&para;</a></h2> <p>If you use <code>io.coil-kt.coil3:coil-network-okhttp</code> You can specify a custom <code>OkHttpClient</code> when creating your <code>ImageLoader</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kd>val</span><span class=w> </span><span class=nv>imageLoader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageLoader</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=c1>// Create the OkHttpClient inside a lambda so it will be initialized lazily on a background thread.</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=p>.</span><span class=na>components</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>        </span><span class=n>add</span><span class=p>(</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>            </span><span class=n>OkHttpNetworkFetcherFactory</span><span class=p>(</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>                </span><span class=n>callFactory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>                    </span><span class=n>OkHttpClient</span><span class=p>.</span><span class=na>Builder</span><span class=p>()</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>                        </span><span class=p>.</span><span class=na>addInterceptor</span><span class=p>(</span><span class=n>CustomInterceptor</span><span class=p>())</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>                        </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>                </span><span class=p>}</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>            </span><span class=p>)</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>        </span><span class=p>)</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you already have a built <code>OkHttpClient</code>, use <a href=https://square.github.io/okhttp/5.x/okhttp/okhttp3/-ok-http-client/#customize-your-client-with-newbuilder><code>newBuilder()</code></a> to build a new client that shares resources with the original.</p> </div> <h4 id=headers>Headers<a class=headerlink href=#headers title="Permanent link">&para;</a></h4> <p>Headers can be added to your image requests in one of two ways. You can set headers for a single request:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kd>val</span><span class=w> </span><span class=nv>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>NetworkHeaders</span><span class=p>.</span><span class=na>Builder</span><span class=p>()</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=s>&quot;Cache-Control&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;no-cache&quot;</span><span class=p>)</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=kd>val</span><span class=w> </span><span class=nv>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=p>.</span><span class=na>httpHeaders</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>    </span><span class=p>.</span><span class=na>target</span><span class=p>(</span><span class=n>imageView</span><span class=p>)</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=n>imageLoader</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</code></pre></div> <p>Or you can create an OkHttp <a href=https://square.github.io/okhttp/interceptors/ ><code>Interceptor</code></a> that sets headers for every request executed by your <code>ImageLoader</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kd>class</span><span class=w> </span><span class=nc>RequestHeaderInterceptor</span><span class=p>(</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>name</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>value</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>Interceptor</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>intercept</span><span class=p>(</span><span class=n>chain</span><span class=p>:</span><span class=w> </span><span class=n>Interceptor</span><span class=p>.</span><span class=na>Chain</span><span class=p>):</span><span class=w> </span><span class=n>Response</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>        </span><span class=kd>val</span><span class=w> </span><span class=nv>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>NetworkHeaders</span><span class=p>.</span><span class=na>Builder</span><span class=p>()</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=s>&quot;Cache-Control&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;no-cache&quot;</span><span class=p>)</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>        </span><span class=kd>val</span><span class=w> </span><span class=nv>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>chain</span><span class=p>.</span><span class=na>request</span><span class=p>().</span><span class=na>newBuilder</span><span class=p>()</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>            </span><span class=p>.</span><span class=na>httpHeaders</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>chain</span><span class=p>.</span><span class=na>proceed</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=p>}</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=kd>val</span><span class=w> </span><span class=nv>imageLoader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageLoader</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class=p>.</span><span class=na>okHttpClient</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>        </span><span class=n>OkHttpClient</span><span class=p>.</span><span class=na>Builder</span><span class=p>()</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>            </span><span class=c1>// This header will be added to every image request.</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>            </span><span class=p>.</span><span class=na>addNetworkInterceptor</span><span class=p>(</span><span class=n>RequestHeaderInterceptor</span><span class=p>(</span><span class=s>&quot;Cache-Control&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;no-cache&quot;</span><span class=p>))</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
</code></pre></div> <h2 id=using-a-memory-cache-key-as-a-placeholder>Using a Memory Cache Key as a Placeholder<a class=headerlink href=#using-a-memory-cache-key-as-a-placeholder title="Permanent link">&para;</a></h2> <p>Using a previous request's <code>MemoryCache.Key</code> as a placeholder for a subsequent request can be useful if the two images are the same, though loaded at different sizes. For instance, if the first request loads the image at 100x100 and the second request loads the image at 500x500, we can use the first image as a synchronous placeholder for the second request.</p> <p>Here's what this effect looks like in the sample app:</p> <p style="text-align: center;"> <video width=360 height=640 autoplay loop muted playsinline> <source src=../images/crossfade.mp4 type=video/mp4> </video> </p> <p><em>Images in the list have intentionally been loaded with very low detail and the crossfade is slowed down to highlight the visual effect.</em></p> <p>To achieve this effect, use the <code>MemoryCache.Key</code> of the first request as the <code>ImageRequest.placeholderMemoryCacheKey</code> of the second request. Here's an example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>// First request</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=n>listImageView</span><span class=p>.</span><span class=na>load</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1>// Second request (once the first request finishes)</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=n>detailImageView</span><span class=p>.</span><span class=na>load</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=n>placeholderMemoryCacheKey</span><span class=p>(</span><span class=n>listImageView</span><span class=p>.</span><span class=na>result</span><span class=p>.</span><span class=na>memoryCacheKey</span><span class=p>)</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>}</span>
</code></pre></div> <h2 id=shared-element-transitions>Shared Element Transitions<a class=headerlink href=#shared-element-transitions title="Permanent link">&para;</a></h2> <p><a href=https://developer.android.com/training/transitions/start-activity>Shared element transitions</a> allow you to animate between <code>Activities</code> and <code>Fragments</code>. Here are some recommendations on how to get them to work with Coil:</p> <ul> <li> <p><strong>Shared element transitions are incompatible with hardware bitmaps.</strong> You should set <code>allowHardware(false)</code> to disable hardware bitmaps for both the <code>ImageView</code> you are animating from and the view you are animating to. If you don't, the transition will throw an <code>java.lang.IllegalArgumentException: Software rendering doesn't support hardware bitmaps</code> exception.</p> </li> <li> <p>Use the <a href=../getting_started/#memory-cache><code>MemoryCache.Key</code></a> of the start image as the <a href=/coil/api/coil-core/coil3.request/-image-request/-builder/placeholder-memory-cache-key><code>placeholderMemoryCacheKey</code></a> for the end image. This ensures that the start image is used as the placeholder for the end image, which results in a smooth transition with no white flashes if the image is in the memory cache.</p> </li> <li> <p>Use <a href=https://developer.android.com/reference/android/transition/ChangeImageTransform><code>ChangeImageTransform</code></a> and <a href=https://developer.android.com/reference/android/transition/ChangeBounds><code>ChangeBounds</code></a> together for optimal results.</p> </li> </ul> <p>Using Compose? <a href=https://www.tunjid.com/articles/animating-contentscale-during-image-shared-element-transitions-65fba03537c67f8df0161c31>Check out this article for how to perform shared element transitions with <code>AsyncImage</code></a>.</p> <h2 id=remote-views>Remote Views<a class=headerlink href=#remote-views title="Permanent link">&para;</a></h2> <p>Coil does not provide a <code>Target</code> for <a href=https://developer.android.com/reference/android/widget/RemoteViews><code>RemoteViews</code></a> out of the box, however you can create one like so:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kd>class</span><span class=w> </span><span class=nc>RemoteViewsTarget</span><span class=p>(</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>context</span><span class=p>:</span><span class=w> </span><span class=n>Context</span><span class=p>,</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>componentName</span><span class=p>:</span><span class=w> </span><span class=n>ComponentName</span><span class=p>,</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>remoteViews</span><span class=p>:</span><span class=w> </span><span class=n>RemoteViews</span><span class=p>,</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=nd>@IdRes</span><span class=w> </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>imageViewResId</span><span class=p>:</span><span class=w> </span><span class=kt>Int</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>Target</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>onStart</span><span class=p>(</span><span class=n>placeholder</span><span class=p>:</span><span class=w> </span><span class=n>Image?)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>setDrawable</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>    </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>onError</span><span class=p>(</span><span class=n>error</span><span class=p>:</span><span class=w> </span><span class=n>Image?)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>setDrawable</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>    </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>onSuccess</span><span class=p>(</span><span class=n>result</span><span class=p>:</span><span class=w> </span><span class=n>Image</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>setDrawable</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>setDrawable</span><span class=p>(</span><span class=n>image</span><span class=p>:</span><span class=w> </span><span class=n>Image?)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>        </span><span class=n>remoteViews</span><span class=p>.</span><span class=na>setImageViewBitmap</span><span class=p>(</span><span class=n>imageViewResId</span><span class=p>,</span><span class=w> </span><span class=n>image</span><span class=o>?.</span><span class=na>toBitmap</span><span class=p>())</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>        </span><span class=n>AppWidgetManager</span><span class=p>.</span><span class=na>getInstance</span><span class=p>(</span><span class=n>context</span><span class=p>).</span><span class=na>updateAppWidget</span><span class=p>(</span><span class=n>componentName</span><span class=p>,</span><span class=w> </span><span class=n>remoteViews</span><span class=p>)</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=p>}</span>
</code></pre></div> <p>Then <code>enqueue</code>/<code>execute</code> the request like normal:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=kd>val</span><span class=w> </span><span class=nv>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=p>.</span><span class=na>target</span><span class=p>(</span><span class=n>RemoteViewsTarget</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=n>componentName</span><span class=p>,</span><span class=w> </span><span class=n>remoteViews</span><span class=p>,</span><span class=w> </span><span class=n>imageViewResId</span><span class=p>))</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>()</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=n>imageLoader</span><span class=p>.</span><span class=na>enqueue</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</code></pre></div> <h2 id=transforming-painters>Transforming Painters<a class=headerlink href=#transforming-painters title="Permanent link">&para;</a></h2> <p>Both <code>AsyncImage</code> and <code>AsyncImagePainter</code> have <code>placeholder</code>/<code>error</code>/<code>fallback</code> arguments that accept <code>Painter</code>s. Painters are less flexible than using composables, but are faster as Coil doesn't need to use subcomposition. That said, it may be necessary to inset, stretch, tint, or transform your painter to get the desired UI. To accomplish this, <a href=https://gist.github.com/colinrtwhite/c2966e0b8584b4cdf0a5b05786b20ae1>copy this Gist into your project</a> and wrap the painter like so:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>,</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=n>placeholder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>forwardingPainter</span><span class=p>(</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>        </span><span class=n>painter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>painterResource</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=na>drawable</span><span class=p>.</span><span class=na>placeholder</span><span class=p>),</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>        </span><span class=n>colorFilter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ColorFilter</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=na>Red</span><span class=p>),</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>        </span><span class=n>alpha</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0.5f</span><span class=p>,</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>    </span><span class=p>),</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=p>)</span>
</code></pre></div> <p>The <code>onDraw</code> can be overwritten using a trailing lambda:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>AsyncImage</span><span class=p>(</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>,</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=n>contentDescription</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>    </span><span class=n>placeholder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>forwardingPainter</span><span class=p>(</span><span class=n>painterResource</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=na>drawable</span><span class=p>.</span><span class=na>placeholder</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>info</span><span class=w> </span><span class=o>-&gt;</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>        </span><span class=n>inset</span><span class=p>(</span><span class=m>50f</span><span class=p>,</span><span class=w> </span><span class=m>50f</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>            </span><span class=n>with</span><span class=p>(</span><span class=n>info</span><span class=p>.</span><span class=na>painter</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>                </span><span class=n>draw</span><span class=p>(</span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>info</span><span class=p>.</span><span class=na>alpha</span><span class=p>,</span><span class=w> </span><span class=n>info</span><span class=p>.</span><span class=na>colorFilter</span><span class=p>)</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=p>)</span>
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Coil Contributors </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/coil-kt/coil target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.83f73b43.min.js></script> </body> </html>